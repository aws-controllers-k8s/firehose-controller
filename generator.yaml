model_name: firehose
ignore:
  resource_names:
     # - DeliveryStream
  field_paths:
    - CreateDeliveryStreamInput.AmazonOpenSearchServerlessDestinationConfiguration
    - CreateDeliveryStreamInput.AmazonopensearchserviceDestinationConfiguration
    - CreateDeliveryStreamInput.DatabaseSourceConfiguration
    - CreateDeliveryStreamInput.DirectPutSourceConfiguration
    - CreateDeliveryStreamInput.ElasticsearchDestinationConfiguration
    - CreateDeliveryStreamInput.ExtendedS3DestinationConfiguration
    #- CreateDeliveryStreamInput.HttpEndpointDestinationConfiguration
    - CreateDeliveryStreamInput.IcebergDestinationConfiguration
    - CreateDeliveryStreamInput.KinesisStreamSourceConfiguration
    - CreateDeliveryStreamInput.MSKSourceConfiguration
    - CreateDeliveryStreamInput.RedshiftDestinationConfiguration
    - CreateDeliveryStreamInput.SnowflakeDestinationConfiguration
    - CreateDeliveryStreamInput.SplunkDestinationConfiguration
    - CreateDeliveryStreamInput.S3DestinationConfiguration


resources:
  DeliveryStream:
    fields:
      # CreateDeliveryStream only returns the ARN of the created the Delivery Stream.
      # Need to set Status fields based on shape of DescribeDeliveryStream.
      DeliveryStreamStatus:
        is_read_only: true
        from:
          operation: DescribeDeliveryStream
          path: DeliveryStreamDescription.DeliveryStreamStatus

      CreateTimestamp:
        is_read_only: true
        from:
          operation: DescribeDeliveryStream
          path: DeliveryStreamDescription.CreateTimestamp

      LastUpdateTimestamp:
        is_read_only: true
        from:
          operation: DescribeDeliveryStream
          path: DeliveryStreamDescription.LastUpdateTimestamp
      
      DeliveryStreamEncryptionConfiguration.Status:
        is_read_only: true
        from:
          operation: DescribeDeliveryStream
          path: DeliveryStreamDescription.DeliveryStreamEncryptionConfiguration.Status
      
      DeliveryStreamEncryptionConfiguration.FailureDescription:
        is_read_only: true
        from:
          operation: DescribeDeliveryStream
          path: DeliveryStreamDescription.DeliveryStreamEncryptionConfiguration.FailureDescription

      VersionId:
        is_read_only: true
        from:
          operation: DescribeDeliveryStream
          path: DeliveryStreamDescription.VersionId
    
    synced:
      when:
        - path: Status.DeliveryStreamStatus
          in:
            - ACTIVE
            - CREATING_FAILED
    exceptions:
      errors:
        404:
          code: ResourceNotFoundException
        


